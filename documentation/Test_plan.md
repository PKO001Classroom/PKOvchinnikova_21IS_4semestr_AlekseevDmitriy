# План тестирования системы "Учебный журнал с ФГОС"

## Общая информация

**Система:** Учебный журнал с учетом требований ФГОС СПО  
**Версия:** 1.0  
**Тип тестирования:** Автоматизированное функциональное тестирование  
**Инструменты:** Python, pytest, SQLite3  

## Цели тестирования

1. Проверить корректность работы модуля базы данных
2. Убедиться в правильности бизнес-логики системы
3. Проверить корректность расчетов оценок по ФГОС
4. Убедиться в целостности данных
5. Проверить обработку граничных случаев

## Структура тестового проекта

```
tests/
├── conftest.py          # Общие фикстуры и настройки
├── requirments-dev.txt  # Нужные библеотеки для работы тестов
└── test_all.py          # Запуск тестов
```

## 1. Тестирование модуля базы данных (database.py)

### 1.1 Тесты инициализации базы данных
- **Тест:** Создание подключения к БД
- **Тест:** Инициализация таблиц
- **Тест:** Загрузка тестовых данных
- **Тест:** Обработка ошибок подключения

### 1.2 Тесты CRUD операций
- **Тест:** Добавление пользователей
- **Тест:** Получение пользователей по ролям
- **Тест:** Добавление предметов
- **Тест:** Добавление компетенций ФГОС
- **Тест:** Добавление индикаторов освоения
- **Тест:** Добавление оценок с индикаторами

### 1.3 Тесты запросов
- **Тест:** Получение компетенций по предмету
- **Тест:** Получение индикаторов по компетенции
- **Тест:** Получение оценок студента
- **Тест:** Получение оценок преподавателя

## 2. Тестирование моделей данных (models.py)

### 2.1 Тесты классов моделей
- **Тест:** Создание модели User
- **Тест:** Создание модели Subject
- **Тест:** Создание модели FgosCompetency
- **Тест:** Создание модели FgosIndicator
- **Тест:** Создание модели Grade
- **Тест:** Создание модели GradeWithDetails

### 2.2 Тесты методов моделей
- **Тест:** Метод add_indicator класса Grade
- **Тест:** Метод get_grade_description класса GradeWithDetails
- **Тест:** Метод __repr__ всех моделей

## 3. Тестирование валидаторов (validators.py)

### 3.1 Тесты валидации комментариев
- **Тест:** Валидация комментария минимальной длины
- **Тест:** Валидация комментария с кодом компетенции
- **Тест:** Валидация невалидных комментариев

### 3.2 Тесты валидации индикаторов
- **Тест:** Валидация пустого списка индикаторов
- **Тест:** Валидация достаточного количества индикаторов
- **Тест:** Валидация недостаточного количества индикаторов

### 3.3 Тесты валидации данных компетенций
- **Тест:** Валидация кода компетенции
- **Тест:** Валидация названия компетенции
- **Тест:** Валидация данных индикаторов

### 3.4 Тесты расчетов
- **Тест:** Расчет процента освоения
- **Тест:** Расчет оценки по количеству индикаторов
- **Тест:** Получение требований для оценки

## 4. Тестирование бизнес-логики расчетов

### 4.1 Тесты расчета оценок
- **Тест:** Расчет оценки для 8 индикаторов
  - 6-8 индикаторов → оценка 5
  - 5 индикаторов → оценка 4
  - 4 индикатора → оценка 3
  - 0-3 индикатора → оценка 2
  
- **Тест:** Расчет оценки для 6 индикаторов
  - 5-6 индикаторов → оценка 5
  - 4 индикатора → оценка 4
  - 3 индикатора → оценка 3
  - 0-2 индикатора → оценка 2
  
- **Тест:** Расчет оценки для других случаев
- **Тест:** Расчет процентного значения

### 4.2 Тесты граничных случаев
- **Тест:** Пустой список индикаторов
- **Тест:** Все индикаторы выбраны
- **Тест:** Один индикатор выбран
- **Тест:** Ноль индикаторов в компетенции

## 5. Интеграционные тесты

### 5.1 Тесты полного цикла выставления оценки
- **Тест:** От выбора студента до сохранения оценки
- **Тест:** Отображение оценки в журнале
- **Тест:** Отображение оценки у студента

### 5.2 Тесты целостности данных
- **Тест:** Связи между таблицами
- **Тест:** Каскадное удаление
- **Тест:** Уникальность данных

### 5.3 Тесты производительности
- **Тест:** Время загрузки списка студентов
- **Тест:** Время загрузки оценок
- **Тест:** Время сохранения оценки с индикаторами

## 6. Тестирование обработки ошибок

### 6.1 Тесты исключительных ситуаций
- **Тест:** Ошибка подключения к БД
- **Тест:** Некорректные параметры запросов
- **Тест:** Нарушение ограничений целостности
- **Тест:** Ошибки валидации данных

### 6.2 Тесты восстановления после ошибок
- **Тест:** Восстановление подключения к БД
- **Тест:** Обработка некорректных данных форм

## Стратегия тестирования

### Приоритеты тестирования
1. **Высокий приоритет:**
   - Расчет оценок по ФГОС
   - Сохранение данных в БД
   - Валидация обязательных полей
   
2. **Средний приоритет:**
   - Полнота загрузки данных
   - Корректность отображения
   - Обработка ошибок
   
3. **Низкий приоритет:**
   - Производительность
   - UX/UI тестирование

### Критерии приемки
- Все тесты проходят успешно
- Покрытие кода не менее 80%
- Отсутствие критических ошибок
- Корректная работа всех основных функций

## Окружение для тестирования

### Тестовое окружение
- **Python:** 3.8+
- **База данных:** SQLite3 (тестовая)
- **Библиотеки:** pytest, pytest-cov
- **ОС:** Windows/Linux/macOS

### Конфигурация тестов
- Изолированная тестовая БД
- Автоматическая очистка данных
- Генерация тестовых данных
- Логирование результатов

## Подход к написанию тестов

### Принципы
1. **Изолированность:** Каждый тест независим
2. **Повторяемость:** Тесты дают одинаковый результат
3. **Полнота:** Покрытие всех сценариев использования
4. **Читаемость:** Понятные названия и структура тестов

### Паттерны
- Использование фикстур для подготовки данных
- Параметризованные тесты для похожих сценариев
- Мокирование зависимостей при необходимости
- Проверка утверждений (assert)

## Метрики и отчетность

### Метрики качества
- **Покрытие кода:** процент покрытия тестами
- **Успешность тестов:** процент пройденных тестов
- **Время выполнения:** общее время прогона тестов
- **Количество тестов:** общее число тестовых случаев

### Отчеты
- **HTML отчет:** для визуального анализа
- **XML отчет:** для CI/CD систем
- **Консольный вывод:** для быстрой проверки
- **Логи:** для отладки проблем

## Риски и ограничения

### Риски
1. **Зависимость от БД:** Тесты могут зависеть от состояния БД
2. **Изменения в бизнес-логике:** Требуется обновление тестов
3. **Время выполнения:** Большое количество тестов может замедлить разработку

### Ограничения
- Тестируется только бэкенд (без UI)
- Нет тестирования производительности под нагрузкой
- Ограниченное тестирование безопасности

## План выполнения

### Этап 1: Подготовка (1 день)
- Настройка тестового окружения
- Создание структуры проекта
- Написание базовых фикстур

### Этап 2: Модульное тестирование (3 дня)
- Тестирование database.py
- Тестирование models.py
- Тестирование validators.py

### Этап 3: Интеграционное тестирование (2 дня)
- Тестирование взаимодействия модулей
- Тестирование полных сценариев

### Этап 4: Отчетность и улучшение (1 день)
- Анализ покрытия кода
- Оптимизация тестов
- Создание отчетов
